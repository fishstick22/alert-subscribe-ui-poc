
  <form #programConfigurationViaCommunicationForm="ngForm" 
    (ngSubmit)="saveProgramConfiguration(programConfigurationViaCommunicationForm)" >
<!--    <input type="hidden" name="id" [(ngModel)]="program.id" id="programId">-->
    <div class="modal-header bg-dark">
      <h4 class="modal-title text-white">
        Configure Program
        <small>for CommId {{communication.id}}: {{communication.name}}</small>
      </h4>
      <button type="button" class="close text-white" aria-label="Close" (click)="configureProgramModal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="programName">Choose Program</label>
        <select [(ngModel)]="selectedProgram" id="program" name="program" required>
          <option *ngFor="let p of programs" [ngValue]="p.id">{{p.name}}</option>
        </select>
      </div>
      <table class="table table-responsive table-sm table-striped table-bordered table-hover">
        <caption></caption>
        <thead class="thead-inverse">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>E<small>mail</small></th>
            <th>IVR</th>
            <th>SMS</th>
            <th>Mail</th>
            <th>M<small>obile</small></th>
            <th>M<small>andatory</small></th>
            <th>Effective</th>
            <th>Expiration</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pc of programConfigurations; let i = index" 
              [class.table-success]="i == lastPgmConfigRow">
            <td><span class="badge badge-secondary">{{pc.id}}</span></td>
            <td *ngIf="i !== lastPgmConfigRow"><span>{{pc.name}}</span></td>
            <td *ngIf="i === lastPgmConfigRow"><input type="text" class="form-control form-control-sm" name="name" [(ngModel)]="pc.name" required
              id="pgmConfigName" aria-describedby="pgmConfigNamelHelp" placeholder="Enter Program Configuration Name">
            </td>
            <td><select-channel-priority 
                  name="chanEmailPriority" [priority]="pc.chanEmailPriority"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow" ></select-channel-priority></td>
            <td><select-channel-priority 
                  name="chanIvrPriority" [priority]="pc.chanIvrPriority"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow" ></select-channel-priority></td>
            <td><select-channel-priority 
                  name="chanSmsPriority" [priority]="pc.chanSmsPriority"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow" ></select-channel-priority></td>  
            <td><select-channel-priority 
                  name="chanMailPriority" [priority]="pc.chanMailPriority"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow" ></select-channel-priority></td> 
            <td><select-channel-priority 
                  name="chanMobilePriority" [priority]="pc.chanMobilePriority"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow" ></select-channel-priority></td> 
            <td *ngIf="i !== lastPgmConfigRow"><span>{{pc.chanMandatory}}</span></td>
            <td *ngIf="i === lastPgmConfigRow">
              <select [(ngModel)]="pc.chanMandatory" id="chanMandatory" name="chanMandatory" required
                  [disabled]="i !== lastPgmConfigRow">
                <option *ngFor="let cmo of chanMandatoryOpts" [ngValue]="cmo">{{cmo}}</option>
              </select>
            </td>
            <td><date-eff-exp
                  dateType="effective" [progConfig]="pc"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow"
                  (newDateValue)="updateDateValue($event, pc, 'effective')"></date-eff-exp></td>
            <td><date-eff-exp
                  dateType="expiration" [progConfig]="pc"
                  [i]="i" [lastPgmConfigRow]="lastPgmConfigRow"
                  (newDateValue)="updateDateValue($event, pc, 'expiration')"></date-eff-exp></td>

            <!--
     "chanMailPriority": 0,
     "chanMobilePriority": 0,

     "effective": "2017-1-1",
     "expiration": "9999-12-31",
            -->
          </tr>
      </table>
    </div>
    <div class="modal-footer">
      <span class="mr-auto">Some instructional content or condition message goes here: {{newPgmConfig.effective}}</span>
      <button type="submit" class="btn btn-outline-dark" [disabled]="!programConfigurationViaCommunicationForm.valid">Save</button>
      <button type="button" class="btn btn-outline-dark" (click)="configureProgramModal.close('Close click')">Close</button>
    </div>
  </form>
